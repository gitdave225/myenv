AWSTemplateFormatVersion: '2010-09-09'
Description: Onica DevOps Test 2.1 S3 Stack
Parameters:
  Env:
    Type: String
    Default: sandbox
    AllowedValues:
      - prod
      - nonprod
      - sandbox
    Description: 'Deployment Environment'

  ContactInfo:
    Type: String
    Default: 'Client Group'
    Description: 'Contact for Client'

  ContactEmail:
    Type: String
    Default: 'clientgroup@company.info'
    Description: 'Contact email for Client'

Mappings:
  MapRegion:
    us-east-1:
      Name: ue1
    us-west-2:
      Name: uw2

Resources:
  ClientS3:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: !Join
      - '-'
      - -  'client-s3'
        -  !FindInMap [MapRegion, !Ref 'AWS::Region', Name]
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true
      Tags:
        - Key: Name
          Value: client-s3
        - Key: ContactInfo
          Value: !Ref ContactInfo
        - Key: ContactEmail
          Value: !Ref ContactEmail
        - Key: Environment
          Value: !Ref Env
        - Key: Tool
          Value: CFN
